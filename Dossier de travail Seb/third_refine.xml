<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1682234329238" org.eventb.texttools.text_representation="machine Third_Refine refines Second_Refine  sees Context&#10;&#10;variables Gares // Représente les gares&#10;          Gares_urgence // Représente les gares où le dédoublement de voie est possible. Pour éviter deux trains de se rentrer dedans&#10;          nb_train // Représente le nombre de train dans une gare&#10;          Line // Représente les premières lignes de convois. Donc, le sens d'un train vers une gare&#10;          Line_urgence // Représente les lignes associés aux gares d'urgences.&#10;          Aiguillages // Représente la postion des aiguillages pour effectuer un dédoublement de la voie&#10;          nb_train_urgence // Représente le nombre de train dans une gare d'urgence&#10;          Second_Line // Représente les secondes lignes de convois. Donc le sens opposé d'un train vers une gare&#10;          In_First_Line // Représente les bornes de contact présente sur les premières lignes de convois&#10;          In_Second_Line // Représente les bornes de contact présente sur les secondes lignes de convois&#10;          Line_Gare // Représente les lignes de convois auquel sont associés les gares de destinations.&#10;          nb_train_total // Représente le nombre de train total dans le système&#10;          Freinage_Line // Représente les lignes où est un freinage est effectué&#10;          temp // Variable temporaire permettant de décrementer de 1 les trains sur la première ligne de convois (nécessaire pour la marche arrière)&#10;          temp2 // Variable temporaire permettant de décrementer de 1 les trains sur la seconde ligne de convois (nécessaire pour la marche arrière)&#10;          temp3 // Variable temporaire permettant de vérifier la présence d'un train sur la première ligne de convois (nécessaire pour la marche arrière)&#10;          temp4 // Variable temporaire permettant de vérifier la présence d'un train sur la seconde ligne de convois (nécessaire pour la marche arrière)&#10;          State_system // Vérie l'état du système. Bloque les autres événements si deux trains vont entrer en collision&#10;          State_brake // Vérifie l'état du freinage. Marche arrière possible uniquement si deux trains sont considérés à l'arrêt&#10;          GarePrincipale // Représente les gares principales&#10;          GareSecondaire // Représente les gares secondaires&#10;          Quai // Représente les quais dans les gares&#10;Feux Station_to_Line_Feux Line_to_Secondary_Station_Feux Line_to_Station_Feux Secondary_Station_to_Line_Feux Appli_Voyageur&#10;&#10;invariants&#10;  @inv1 Appli_Voyageur ∈ {Namur,Liege,Bruxelles,Huy,Leuven,Ottignies} → BOOL&#10;&#10;events&#10;  event INITIALISATION extends INITIALISATION&#10;    then&#10;      @act28 Appli_Voyageur ≔ {Namur↦FALSE,Liege↦FALSE,Bruxelles↦FALSE,Huy↦FALSE,Leuven↦FALSE,Ottignies↦FALSE}&#10;  end&#10;&#10;  event Apparition_train extends Apparition_train&#10;  end&#10;&#10;  event MainStation_To_Line extends MainStation_To_Line&#10;    then&#10;      @act6 Appli_Voyageur(SelectGP) ≔ FALSE&#10;  end&#10;&#10;  event Line_To_Secondary_Station extends Line_To_Secondary_Station&#10;    where&#10;      @grd10 Appli_Voyageur(SelectGareUrgence) = TRUE&#10;  end&#10;&#10;  event SecondaryStation_To_Second_Line extends SecondaryStation_To_Second_Line&#10;    then&#10;      @act6 Appli_Voyageur(SelectGare) ≔ FALSE&#10;  end&#10;&#10;  event Line_To_Second_Line extends Line_To_Second_Line&#10;  end&#10;&#10;  event Second_Line_To_MainStation extends Second_Line_To_MainStation&#10;    where&#10;      @grd11 Appli_Voyageur(SelectGare) = TRUE&#10;  end&#10;&#10;  event Choose_Aiguillage extends Choose_Aiguillage&#10;  end&#10;&#10;  event Freinage_Urgence extends Freinage_Urgence&#10;  end&#10;&#10;  event Marche_Arriere_To_MainStation extends Marche_Arriere_To_MainStation&#10;  end&#10;&#10;  event Message_application&#10;    any SelectGare SelectTrain&#10;    where&#10;      @grd1 (SelectGare ∈ dom(Appli_Voyageur) ∧ Line_urgence(SelectTrain) = SelectGare ∧ Aiguillages(SelectTrain) = TRUE ∧ Line(SelectTrain) ≥ 1) ∨ (SelectGare ∈ dom(Appli_Voyageur) ∧ Line_Gare(SelectTrain) = SelectGare ∧ Aiguillages(SelectTrain) = FALSE ∧ Second_Line(SelectTrain) ≥ 1)&#10;      @grd2 Appli_Voyageur(SelectGare) = FALSE&#10;      @grd3 SelectTrain ∈ dom(Line) ∨ SelectTrain ∈ dom(Second_Line)&#10;    then&#10;      @act1 Appli_Voyageur(SelectGare) ≔ TRUE&#10;  end&#10;end&#10;" version="5">
    <org.eventb.core.refinesMachine name="'" org.eventb.core.target="Second_Refine"/>
    <org.eventb.core.seesContext name="_SrbaAOE_Ee2KaoH_Krztlw" org.eventb.core.target="Context"/>
    <org.eventb.core.variable name="_SrlLBOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les gares" org.eventb.core.generated="false" org.eventb.core.identifier="Gares"/>
    <org.eventb.core.variable name="_SrlLBeE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les gares où le dédoublement de voie est possible. Pour éviter deux trains de se rentrer dedans" org.eventb.core.generated="false" org.eventb.core.identifier="Gares_urgence"/>
    <org.eventb.core.variable name="_SrnnQOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente le nombre de train dans une gare" org.eventb.core.generated="false" org.eventb.core.identifier="nb_train"/>
    <org.eventb.core.variable name="_SrnnQeE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les premières lignes de convois. Donc, le sens d'un train vers une gare" org.eventb.core.generated="false" org.eventb.core.identifier="Line"/>
    <org.eventb.core.variable name="_SrnnQuE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les lignes associés aux gares d'urgences." org.eventb.core.generated="false" org.eventb.core.identifier="Line_urgence"/>
    <org.eventb.core.variable name="_SrnnQ-E_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente la postion des aiguillages pour effectuer un dédoublement de la voie" org.eventb.core.generated="false" org.eventb.core.identifier="Aiguillages"/>
    <org.eventb.core.variable name="_SrnnROE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente le nombre de train dans une gare d'urgence" org.eventb.core.generated="false" org.eventb.core.identifier="nb_train_urgence"/>
    <org.eventb.core.variable name="_SrqDgOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les secondes lignes de convois. Donc le sens opposé d'un train vers une gare" org.eventb.core.generated="false" org.eventb.core.identifier="Second_Line"/>
    <org.eventb.core.variable name="_SrqDgeE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les bornes de contact présente sur les premières lignes de convois" org.eventb.core.generated="false" org.eventb.core.identifier="In_First_Line"/>
    <org.eventb.core.variable name="_SrqDguE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les bornes de contact présente sur les secondes lignes de convois" org.eventb.core.generated="false" org.eventb.core.identifier="In_Second_Line"/>
    <org.eventb.core.variable name="_SrqDg-E_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les lignes de convois auquel sont associés les gares de destinations." org.eventb.core.generated="false" org.eventb.core.identifier="Line_Gare"/>
    <org.eventb.core.variable name="_SrqDhOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente le nombre de train total dans le système" org.eventb.core.generated="false" org.eventb.core.identifier="nb_train_total"/>
    <org.eventb.core.variable name="_SrsfwOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les lignes où est un freinage est effectué" org.eventb.core.generated="false" org.eventb.core.identifier="Freinage_Line"/>
    <org.eventb.core.variable name="_SrsfweE_Ee2KaoH_Krztlw" org.eventb.core.comment="Variable temporaire permettant de décrementer de 1 les trains sur la première ligne de convois (nécessaire pour la marche arrière)" org.eventb.core.generated="false" org.eventb.core.identifier="temp"/>
    <org.eventb.core.variable name="_SrsfwuE_Ee2KaoH_Krztlw" org.eventb.core.comment="Variable temporaire permettant de décrementer de 1 les trains sur la seconde ligne de convois (nécessaire pour la marche arrière)" org.eventb.core.generated="false" org.eventb.core.identifier="temp2"/>
    <org.eventb.core.variable name="_Srsfw-E_Ee2KaoH_Krztlw" org.eventb.core.comment="Variable temporaire permettant de vérifier la présence d'un train sur la première ligne de convois (nécessaire pour la marche arrière)" org.eventb.core.generated="false" org.eventb.core.identifier="temp3"/>
    <org.eventb.core.variable name="_SrsfxOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Variable temporaire permettant de vérifier la présence d'un train sur la seconde ligne de convois (nécessaire pour la marche arrière)" org.eventb.core.generated="false" org.eventb.core.identifier="temp4"/>
    <org.eventb.core.variable name="_Sru8AOE_Ee2KaoH_Krztlw" org.eventb.core.comment="Vérie l'état du système. Bloque les autres événements si deux trains vont entrer en collision" org.eventb.core.generated="false" org.eventb.core.identifier="State_system"/>
    <org.eventb.core.variable name="_Sru8AeE_Ee2KaoH_Krztlw" org.eventb.core.comment="Vérifie l'état du freinage. Marche arrière possible uniquement si deux trains sont considérés à l'arrêt" org.eventb.core.generated="false" org.eventb.core.identifier="State_brake"/>
    <org.eventb.core.variable name="_hYHQ4OE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les gares principales" org.eventb.core.generated="false" org.eventb.core.identifier="GarePrincipale"/>
    <org.eventb.core.variable name="_hYHQ4eE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les gares secondaires" org.eventb.core.generated="false" org.eventb.core.identifier="GareSecondaire"/>
    <org.eventb.core.variable name="_hYHQ5OE_Ee2KaoH_Krztlw" org.eventb.core.comment="Représente les quais dans les gares" org.eventb.core.generated="false" org.eventb.core.identifier="Quai"/>
    <org.eventb.core.variable name="_RphboOFAEe2KaoH_Krztlw" org.eventb.core.generated="false" org.eventb.core.identifier="Feux"/>
    <org.eventb.core.variable name="_RphboeFAEe2KaoH_Krztlw" org.eventb.core.generated="false" org.eventb.core.identifier="Station_to_Line_Feux"/>
    <org.eventb.core.variable name="_RphbouFAEe2KaoH_Krztlw" org.eventb.core.generated="false" org.eventb.core.identifier="Line_to_Secondary_Station_Feux"/>
    <org.eventb.core.variable name="_Rpj34OFAEe2KaoH_Krztlw" org.eventb.core.generated="false" org.eventb.core.identifier="Line_to_Station_Feux"/>
    <org.eventb.core.variable name="_Rpj34eFAEe2KaoH_Krztlw" org.eventb.core.generated="false" org.eventb.core.identifier="Secondary_Station_to_Line_Feux"/>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztlx" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
        <org.eventb.core.action name="'" org.eventb.core.assignment="Appli_Voyageur ≔ {Namur↦FALSE,Liege↦FALSE,Bruxelles↦FALSE,Huy↦FALSE,Leuven↦FALSE,Ottignies↦FALSE}" org.eventb.core.generated="false" org.eventb.core.label="act28"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztly" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Apparition_train">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Apparition_train"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztlz" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="MainStation_To_Line">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="MainStation_To_Line"/>
        <org.eventb.core.action name="(" org.eventb.core.assignment="Appli_Voyageur(SelectGP) ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztl{" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Line_To_Secondary_Station">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Line_To_Secondary_Station"/>
        <org.eventb.core.guard name="(" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="Appli_Voyageur(SelectGareUrgence) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztl|" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="SecondaryStation_To_Second_Line">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="SecondaryStation_To_Second_Line"/>
        <org.eventb.core.action name="(" org.eventb.core.assignment="Appli_Voyageur(SelectGare) ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztl}" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Line_To_Second_Line">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Line_To_Second_Line"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztl~" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Second_Line_To_MainStation">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Second_Line_To_MainStation"/>
        <org.eventb.core.guard name="(" org.eventb.core.generated="false" org.eventb.core.label="grd11" org.eventb.core.predicate="Appli_Voyageur(SelectGare) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztm'" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Choose_Aiguillage">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Choose_Aiguillage"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztm(" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Freinage_Urgence">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Freinage_Urgence"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztm)" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="Marche_Arriere_To_MainStation">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="Marche_Arriere_To_MainStation"/>
    </org.eventb.core.event>
    <org.eventb.core.variable name="_hYHQ5OE_Ee2KaoH_Krztm*" org.eventb.core.comment="Représente l'application dans le lequel un message est reçu (BOOL)" org.eventb.core.generated="false" org.eventb.core.identifier="Appli_Voyageur"/>
    <org.eventb.core.invariant name="_hYHQ5OE_Ee2KaoH_Krztm+" org.eventb.core.generated="false" org.eventb.core.label="inv1" org.eventb.core.predicate="Appli_Voyageur ∈ {Namur,Liege,Bruxelles,Huy,Leuven,Ottignies} → BOOL"/>
    <org.eventb.core.event name="_hYHQ5OE_Ee2KaoH_Krztm," org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Message_application">
        <org.eventb.core.guard name="'" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="(SelectGare ∈ dom(Appli_Voyageur) ∧ Line_urgence(SelectTrain) = SelectGare ∧ Aiguillages(SelectTrain) = TRUE ∧ Line(SelectTrain) ≥ 1) ∨ (SelectGare ∈ dom(Appli_Voyageur) ∧ Line_Gare(SelectTrain) = SelectGare ∧ Aiguillages(SelectTrain) = FALSE ∧ Second_Line(SelectTrain) ≥ 1)"/>
        <org.eventb.core.parameter name="(" org.eventb.core.comment="Sélectionne la gare où le train arrive" org.eventb.core.generated="false" org.eventb.core.identifier="SelectGare"/>
        <org.eventb.core.action name=")" org.eventb.core.assignment="Appli_Voyageur(SelectGare) ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.guard name="*" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="Appli_Voyageur(SelectGare) = FALSE"/>
        <org.eventb.core.guard name="+" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="SelectTrain ∈ dom(Line) ∨ SelectTrain ∈ dom(Second_Line)"/>
        <org.eventb.core.parameter name="," org.eventb.core.comment="Sélectionne le nom du train arrivant dans une gare" org.eventb.core.generated="false" org.eventb.core.identifier="SelectTrain"/>
    </org.eventb.core.event>
</org.eventb.core.machineFile>
